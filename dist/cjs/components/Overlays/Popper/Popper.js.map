{"version":3,"sources":["../../../../../src/components/Overlays/Popper/Popper.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  ElementType,\n  forwardRef,\n  HTMLAttributes,\n  RefObject,\n  useState,\n} from \"react\";\nimport styles from \"./Popper.module.css\";\n\nimport { classNames } from \"helpers/classNames\";\nimport { multipleRef } from \"helpers/react/refs\";\nimport { useEnhancedEffect } from \"hooks/useEnhancedEffect\";\n\nimport { useFloating, VirtualElement } from \"@floating-ui/react-dom\";\n\nimport { RootRenderer } from \"components/Service/RootRenderer/RootRenderer\";\nimport {\n  FloatingArrow,\n  FloatingArrowProps,\n} from \"./components/FloatingArrow/FloatingArrow\";\nimport {\n  DEFAULT_ARROW_HEIGHT,\n  DEFAULT_ARROW_PADDING,\n  DefaultIcon,\n} from \"./components/FloatingArrow/icons/arrow\";\nimport { autoUpdateFloatingElement } from \"./helpers/autoUpdateFloatingElement\";\nimport {\n  useFloatingMiddlewares,\n  UseFloatingMiddlewaresOptions,\n} from \"./hooks/useFloatingMiddlewares\";\n\nexport interface PopperProps\n  extends Omit<\n      UseFloatingMiddlewaresOptions,\n      \"arrowHeight\" | \"arrowPadding\" | \"arrowRef\"\n    >,\n    HTMLAttributes<HTMLDivElement> {\n  /** Reference to the target element or virtual element for precise positioning. */\n  targetRef: RefObject<HTMLElement> | VirtualElement;\n  /** Configuration and customization options for the floating arrow component. */\n  arrowProps?: FloatingArrowProps & {\n    /** Optionally override the default arrow height. */\n    height?: number;\n    /** Optionally override the default arrow padding. */\n    padding?: number;\n  };\n  /** Optional custom component for the arrow icon, replacing the default. */\n  ArrowIcon?: FloatingArrowProps[\"Icon\"];\n  /** Defines the root element type of the Popper, allowing for semantic customization. */\n  Component?: ElementType;\n  /** Opt-in feature to automatically update Popper's position when the target element resizes. */\n  autoUpdateOnTargetResize?: boolean;\n  /** Optional custom container to render the portal into, overrides the default from context */\n  portalContainer?: HTMLElement | null;\n}\n\n/**\n * Renders a Popper component, leveraging floating UI for dynamic, responsive positioning.\n * Supports advanced configurations like virtual elements, custom arrows, and auto-position updates.\n */\nexport const Popper = forwardRef(\n  (\n    {\n      // UseFloatingMiddlewaresOptions\n      placement = \"auto\",\n      sameWidth,\n      offsetByMainAxis = 8,\n      offsetByCrossAxis = 0,\n      withArrow = true,\n      customMiddlewares,\n\n      // UseFloatingProps\n      autoUpdateOnTargetResize = false,\n\n      // ArrowProps\n      arrowProps,\n      ArrowIcon = DefaultIcon,\n\n      Component = \"div\",\n      style,\n      targetRef,\n      className,\n      children,\n      portalContainer,\n      ...restProps\n    }: PopperProps,\n    ref\n  ) => {\n    const [arrowRef, setArrowRef] = useState<HTMLDivElement | null>(null);\n\n    const { strictPlacement, middlewares } = useFloatingMiddlewares({\n      placement,\n      sameWidth,\n      withArrow,\n      arrowRef,\n      arrowHeight: arrowProps?.height || DEFAULT_ARROW_HEIGHT,\n      arrowPadding: arrowProps?.padding || DEFAULT_ARROW_PADDING,\n      offsetByMainAxis,\n      offsetByCrossAxis,\n      customMiddlewares,\n    });\n\n    const {\n      placement: resolvedPlacement,\n      refs,\n      middlewareData,\n      floatingStyles,\n    } = useFloating({\n      placement: strictPlacement,\n      middleware: middlewares,\n      whileElementsMounted(...args) {\n        return autoUpdateFloatingElement(...args, {\n          elementResize: autoUpdateOnTargetResize,\n        });\n      },\n    });\n\n    useEnhancedEffect(() => {\n      refs.setReference(\"current\" in targetRef ? targetRef.current : targetRef);\n    }, [refs.setReference, targetRef]);\n\n    return (\n      <RootRenderer customContainer={portalContainer}>\n        <Component\n          {...restProps}\n          ref={multipleRef(ref, refs.setFloating)}\n          style={{ ...style, ...floatingStyles }}\n          className={classNames(styles.wrapper, className)}\n        >\n          {withArrow && (\n            <FloatingArrow\n              {...arrowProps}\n              coords={middlewareData.arrow}\n              placement={resolvedPlacement}\n              ref={setArrowRef}\n              Icon={ArrowIcon}\n            />\n          )}\n          {children}\n        </Component>\n      </RootRenderer>\n    );\n  }\n);\n"],"names":["Popper","forwardRef","ref","placement","sameWidth","offsetByMainAxis","offsetByCrossAxis","withArrow","customMiddlewares","autoUpdateOnTargetResize","arrowProps","ArrowIcon","DefaultIcon","Component","style","targetRef","className","children","portalContainer","restProps","arrowRef","setArrowRef","useState","strictPlacement","middlewares","useFloatingMiddlewares","arrowHeight","height","DEFAULT_ARROW_HEIGHT","arrowPadding","padding","DEFAULT_ARROW_PADDING","resolvedPlacement","refs","middlewareData","floatingStyles","useFloating","middleware","whileElementsMounted","args","autoUpdateFloatingElement","elementResize","useEnhancedEffect","setReference","current","RootRenderer","customContainer","multipleRef","setFloating","classNames","FloatingArrow","coords","arrow","Icon"],"mappings":"AAAA;;;;;+BA8DaA;;;eAAAA;;;;;;;uBAtDN;4BAGoB;sBACC;mCACM;0BAEU;8BAEf;+BAItB;uBAKA;2CACmC;wCAInC;AA+BA,MAAMA,uBAASC,IAAAA,iBAAU,EAC9B,SAyBEC;QAxBA,EACE,gCAAgC;IAChCC,YAAY,MAAM,EAClBC,SAAS,EACTC,mBAAmB,CAAC,EACpBC,oBAAoB,CAAC,EACrBC,YAAY,IAAI,EAChBC,iBAAiB,EAEjB,mBAAmB;IACnBC,2BAA2B,KAAK,EAEhC,aAAa;IACbC,UAAU,EACVC,YAAYC,kBAAW,EAEvBC,YAAY,KAAK,EACjBC,KAAK,EACLC,SAAS,EACTC,SAAS,EACTC,QAAQ,EACRC,eAAe,EAEH,WADTC;QApBHhB;QACAC;QACAC;QACAC;QACAC;QACAC;QAGAC;QAGAC;QACAC;QAEAE;QACAC;QACAC;QACAC;QACAC;QACAC;;IAKF,MAAM,CAACE,UAAUC,YAAY,GAAGC,IAAAA,eAAQ,EAAwB;IAEhE,MAAM,EAAEC,eAAe,EAAEC,WAAW,EAAE,GAAGC,IAAAA,8CAAsB,EAAC;QAC9DtB;QACAC;QACAG;QACAa;QACAM,aAAahB,CAAAA,uBAAAA,iCAAAA,WAAYiB,MAAM,KAAIC,2BAAoB;QACvDC,cAAcnB,CAAAA,uBAAAA,iCAAAA,WAAYoB,OAAO,KAAIC,4BAAqB;QAC1D1B;QACAC;QACAE;IACF;IAEA,MAAM,EACJL,WAAW6B,iBAAiB,EAC5BC,IAAI,EACJC,cAAc,EACdC,cAAc,EACf,GAAGC,IAAAA,qBAAW,EAAC;QACdjC,WAAWoB;QACXc,YAAYb;QACZc,sBAAqB,GAAGC,IAAI;YAC1B,OAAOC,IAAAA,oDAAyB,KAAID,MAAM;gBACxCE,eAAehC;YACjB;QACF;IACF;IAEAiC,IAAAA,oCAAiB,EAAC;QAChBT,KAAKU,YAAY,CAAC,aAAa5B,YAAYA,UAAU6B,OAAO,GAAG7B;IACjE,GAAG;QAACkB,KAAKU,YAAY;QAAE5B;KAAU;IAEjC,qBACE,qBAAC8B,0BAAY;QAACC,iBAAiB5B;kBAC7B,cAAA,sBAACL,uDACKM;YACJjB,KAAK6C,IAAAA,iBAAW,EAAC7C,KAAK+B,KAAKe,WAAW;YACtClC,OAAO,qBAAKA,OAAUqB;YACtBnB,WAAWiC,IAAAA,sBAAU,2BAAiBjC;;gBAErCT,2BACC,qBAAC2C,4BAAa,8CACRxC;oBACJyC,QAAQjB,eAAekB,KAAK;oBAC5BjD,WAAW6B;oBACX9B,KAAKmB;oBACLgC,MAAM1C;;gBAGTM;;;;AAIT"}