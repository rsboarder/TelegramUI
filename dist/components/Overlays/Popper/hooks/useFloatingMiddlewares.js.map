{"version":3,"sources":["../../../../../src/components/Overlays/Popper/hooks/useFloatingMiddlewares.ts"],"sourcesContent":["import { useMemo } from \"react\";\n\nimport {\n  arrow,\n  ArrowOptions,\n  autoPlacement,\n  Boundary,\n  flip,\n  Middleware,\n  offset,\n  shift,\n  size,\n} from \"@floating-ui/react-dom\";\n\nimport {\n  getAutoPlacementAlignment,\n  isNotAutoPlacement,\n} from \"./helpers/alignment\";\nimport { PlacementWithAuto } from \"./types\";\n\nexport interface UseFloatingMiddlewaresOptions {\n  /** By default, the component will automatically choose the best placement */\n  placement?: PlacementWithAuto;\n  /** Offset along the main axis. */\n  offsetByMainAxis?: number;\n  /** Offset along the cross axis. */\n  offsetByCrossAxis?: number;\n  /** Ref for arrow element */\n  arrowRef?: ArrowOptions[\"element\"];\n  /** Whether to display an arrow pointing to the anchor element. */\n  withArrow?: boolean;\n  /** The height of the arrow. This is added to `mainAxis` to prevent the arrow from overlapping the anchor element. */\n  arrowHeight?: number;\n  /** A safe zone around the arrow to prevent it from exceeding the content bounds. */\n  arrowPadding?: number;\n  /** Sets the width to match the target element. */\n  sameWidth?: boolean;\n  /** An array of custom modifiers for Popper (should be memoized). */\n  customMiddlewares?: Middleware[];\n}\n\nexport const useFloatingMiddlewares = ({\n  placement = \"auto\",\n  arrowRef = null,\n  withArrow,\n  arrowHeight,\n  arrowPadding,\n  sameWidth,\n  offsetByMainAxis = 0,\n  offsetByCrossAxis = 0,\n  customMiddlewares,\n}: UseFloatingMiddlewaresOptions) => {\n  return useMemo(() => {\n    const isNotAutoPlaced = isNotAutoPlacement(placement);\n    const middlewares: Middleware[] = [\n      offset({\n        crossAxis: offsetByCrossAxis,\n        mainAxis:\n          withArrow && arrowHeight\n            ? offsetByMainAxis + arrowHeight\n            : offsetByMainAxis,\n      }),\n    ];\n\n    if (isNotAutoPlaced) {\n      middlewares.push(\n        flip({\n          fallbackAxisSideDirection: \"start\",\n          boundary: \"viewport\" as Boundary,\n          rootBoundary: \"viewport\",\n        })\n      );\n    } else {\n      middlewares.push(\n        autoPlacement({\n          alignment: getAutoPlacementAlignment(placement),\n          boundary: \"viewport\" as Boundary,\n          rootBoundary: \"viewport\",\n        })\n      );\n    }\n\n    middlewares.push(shift());\n\n    if (sameWidth) {\n      middlewares.push(\n        size({\n          apply({ rects, elements }) {\n            Object.assign(elements.floating.style, {\n              width: `${rects.reference.width}px`,\n            });\n          },\n        })\n      );\n    }\n\n    if (customMiddlewares) {\n      middlewares.push(...customMiddlewares);\n    }\n\n    if (withArrow) {\n      middlewares.push(\n        arrow({\n          element: arrowRef,\n          padding: arrowPadding,\n        })\n      );\n    }\n\n    return {\n      middlewares,\n      strictPlacement: isNotAutoPlaced ? placement : undefined,\n    };\n  }, [\n    offsetByCrossAxis,\n    arrowRef,\n    withArrow,\n    arrowHeight,\n    arrowPadding,\n    offsetByMainAxis,\n    sameWidth,\n    customMiddlewares,\n    placement,\n  ]);\n};\n"],"names":["useMemo","arrow","autoPlacement","flip","offset","shift","size","getAutoPlacementAlignment","isNotAutoPlacement","useFloatingMiddlewares","placement","arrowRef","withArrow","arrowHeight","arrowPadding","sameWidth","offsetByMainAxis","offsetByCrossAxis","customMiddlewares","isNotAutoPlaced","middlewares","crossAxis","mainAxis","push","fallbackAxisSideDirection","boundary","rootBoundary","alignment","apply","rects","elements","Object","assign","floating","style","width","reference","element","padding","strictPlacement","undefined"],"mappings":"AAAA,SAASA,OAAO,QAAQ,QAAQ;AAEhC,SACEC,KAAK,EAELC,aAAa,EAEbC,IAAI,EAEJC,MAAM,EACNC,KAAK,EACLC,IAAI,QACC,yBAAyB;AAEhC,SACEC,yBAAyB,EACzBC,kBAAkB,QACb,sBAAsB;AAwB7B,OAAO,MAAMC,yBAAyB,CAAC,EACrCC,YAAY,MAAM,EAClBC,WAAW,IAAI,EACfC,SAAS,EACTC,WAAW,EACXC,YAAY,EACZC,SAAS,EACTC,mBAAmB,CAAC,EACpBC,oBAAoB,CAAC,EACrBC,iBAAiB,EACa;IAC9B,OAAOlB,QAAQ;QACb,MAAMmB,kBAAkBX,mBAAmBE;QAC3C,MAAMU,cAA4B;YAChChB,OAAO;gBACLiB,WAAWJ;gBACXK,UACEV,aAAaC,cACTG,mBAAmBH,cACnBG;YACR;SACD;QAED,IAAIG,iBAAiB;YACnBC,YAAYG,IAAI,CACdpB,KAAK;gBACHqB,2BAA2B;gBAC3BC,UAAU;gBACVC,cAAc;YAChB;QAEJ,OAAO;YACLN,YAAYG,IAAI,CACdrB,cAAc;gBACZyB,WAAWpB,0BAA0BG;gBACrCe,UAAU;gBACVC,cAAc;YAChB;QAEJ;QAEAN,YAAYG,IAAI,CAAClB;QAEjB,IAAIU,WAAW;YACbK,YAAYG,IAAI,CACdjB,KAAK;gBACHsB,OAAM,EAAEC,KAAK,EAAEC,QAAQ,EAAE;oBACvBC,OAAOC,MAAM,CAACF,SAASG,QAAQ,CAACC,KAAK,EAAE;wBACrCC,OAAO,CAAC,EAAEN,MAAMO,SAAS,CAACD,KAAK,CAAC,EAAE,CAAC;oBACrC;gBACF;YACF;QAEJ;QAEA,IAAIjB,mBAAmB;YACrBE,YAAYG,IAAI,IAAIL;QACtB;QAEA,IAAIN,WAAW;YACbQ,YAAYG,IAAI,CACdtB,MAAM;gBACJoC,SAAS1B;gBACT2B,SAASxB;YACX;QAEJ;QAEA,OAAO;YACLM;YACAmB,iBAAiBpB,kBAAkBT,YAAY8B;QACjD;IACF,GAAG;QACDvB;QACAN;QACAC;QACAC;QACAC;QACAE;QACAD;QACAG;QACAR;KACD;AACH,EAAE"}