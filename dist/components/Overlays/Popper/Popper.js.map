{"version":3,"sources":["../../../../src/components/Overlays/Popper/Popper.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  ElementType,\n  forwardRef,\n  HTMLAttributes,\n  RefObject,\n  useState,\n} from \"react\";\nimport styles from \"./Popper.module.css\";\n\nimport { classNames } from \"helpers/classNames\";\nimport { multipleRef } from \"helpers/react/refs\";\nimport { useEnhancedEffect } from \"hooks/useEnhancedEffect\";\n\nimport { useFloating, VirtualElement } from \"@floating-ui/react-dom\";\n\nimport { RootRenderer } from \"components/Service/RootRenderer/RootRenderer\";\nimport {\n  FloatingArrow,\n  FloatingArrowProps,\n} from \"./components/FloatingArrow/FloatingArrow\";\nimport {\n  DEFAULT_ARROW_HEIGHT,\n  DEFAULT_ARROW_PADDING,\n} from \"./components/FloatingArrow/icons/arrow\";\nimport { autoUpdateFloatingElement } from \"./helpers/autoUpdateFloatingElement\";\nimport {\n  useFloatingMiddlewares,\n  UseFloatingMiddlewaresOptions,\n} from \"./hooks/useFloatingMiddlewares\";\n\nexport interface PopperProps\n  extends Omit<\n      UseFloatingMiddlewaresOptions,\n      \"arrowHeight\" | \"arrowPadding\" | \"arrowRef\"\n    >,\n    HTMLAttributes<HTMLDivElement> {\n  /** Reference to the target element or virtual element for precise positioning. */\n  targetRef: RefObject<HTMLElement> | VirtualElement;\n  /** Configuration and customization options for the floating arrow component. */\n  arrowProps?: FloatingArrowProps & {\n    /** Optionally override the default arrow height. */\n    height?: number;\n    /** Optionally override the default arrow padding. */\n    padding?: number;\n  };\n  /** Optional custom component for the arrow icon, replacing the default. */\n  ArrowIcon?: FloatingArrowProps[\"Icon\"] | null;\n  /** Defines the root element type of the Popper, allowing for semantic customization. */\n  Component?: ElementType;\n  /** Opt-in feature to automatically update Popper's position when the target element resizes. */\n  autoUpdateOnTargetResize?: boolean;\n  /** Optional custom container to render the portal into, overrides the default from context */\n  portalContainer?: HTMLElement | null;\n}\n\n/**\n * Renders a Popper component, leveraging floating UI for dynamic, responsive positioning.\n * Supports advanced configurations like virtual elements, custom arrows, and auto-position updates.\n */\nexport const Popper = forwardRef(\n  (\n    {\n      // UseFloatingMiddlewaresOptions\n      placement = \"auto\",\n      sameWidth,\n      offsetByMainAxis = 8,\n      offsetByCrossAxis = 0,\n      withArrow = true,\n      customMiddlewares,\n\n      // UseFloatingProps\n      autoUpdateOnTargetResize = false,\n\n      // ArrowProps\n      arrowProps,\n      ArrowIcon,\n\n      Component = \"div\",\n      style,\n      targetRef,\n      className,\n      children,\n      portalContainer,\n      ...restProps\n    }: PopperProps,\n    ref\n  ) => {\n    const [arrowRef, setArrowRef] = useState<HTMLDivElement | null>(null);\n\n    const { strictPlacement, middlewares } = useFloatingMiddlewares({\n      placement,\n      sameWidth,\n      withArrow,\n      arrowRef,\n      arrowHeight: arrowProps?.height || DEFAULT_ARROW_HEIGHT,\n      arrowPadding: arrowProps?.padding || DEFAULT_ARROW_PADDING,\n      offsetByMainAxis,\n      offsetByCrossAxis,\n      customMiddlewares,\n    });\n\n    const {\n      placement: resolvedPlacement,\n      refs,\n      middlewareData,\n      floatingStyles,\n    } = useFloating({\n      placement: strictPlacement,\n      middleware: middlewares,\n      whileElementsMounted(...args) {\n        return autoUpdateFloatingElement(...args, {\n          elementResize: autoUpdateOnTargetResize,\n        });\n      },\n    });\n\n    useEnhancedEffect(() => {\n      refs.setReference(\"current\" in targetRef ? targetRef.current : targetRef);\n    }, [refs.setReference, targetRef]);\n\n    return (\n      <RootRenderer customContainer={portalContainer}>\n        <Component\n          {...restProps}\n          ref={multipleRef(ref, refs.setFloating)}\n          style={{ ...style, ...floatingStyles }}\n          className={classNames(styles.wrapper, className)}\n        >\n          {withArrow && (\n            <FloatingArrow\n              {...arrowProps}\n              coords={middlewareData.arrow}\n              placement={resolvedPlacement}\n              ref={setArrowRef}\n              {...(ArrowIcon ? { Icon: ArrowIcon } : {})}\n            />\n          )}\n          {children}\n        </Component>\n      </RootRenderer>\n    );\n  }\n);\n"],"names":["forwardRef","useState","classNames","multipleRef","useEnhancedEffect","useFloating","RootRenderer","FloatingArrow","DEFAULT_ARROW_HEIGHT","DEFAULT_ARROW_PADDING","autoUpdateFloatingElement","useFloatingMiddlewares","Popper","ref","placement","sameWidth","offsetByMainAxis","offsetByCrossAxis","withArrow","customMiddlewares","autoUpdateOnTargetResize","arrowProps","ArrowIcon","Component","style","targetRef","className","children","portalContainer","restProps","arrowRef","setArrowRef","strictPlacement","middlewares","arrowHeight","height","arrowPadding","padding","resolvedPlacement","refs","middlewareData","floatingStyles","middleware","whileElementsMounted","args","elementResize","setReference","current","customContainer","setFloating","coords","arrow","Icon"],"mappings":"AAAA;;;;;AAEA,SAEEA,UAAU,EAGVC,QAAQ,QACH,QAAQ;AAGf,SAASC,UAAU,QAAQ,8BAAqB;AAChD,SAASC,WAAW,QAAQ,8BAAqB;AACjD,SAASC,iBAAiB,QAAQ,mCAA0B;AAE5D,SAASC,WAAW,QAAwB,yBAAyB;AAErE,SAASC,YAAY,QAAQ,0CAA+C;AAC5E,SACEC,aAAa,QAER,2CAA2C;AAClD,SACEC,oBAAoB,EACpBC,qBAAqB,QAChB,yCAAyC;AAChD,SAASC,yBAAyB,QAAQ,sCAAsC;AAChF,SACEC,sBAAsB,QAEjB,iCAAiC;AA2BxC;;;CAGC,GACD,OAAO,MAAMC,uBAASZ,WACpB,SAyBEa;QAxBA,EACE,gCAAgC;IAChCC,YAAY,MAAM,EAClBC,SAAS,EACTC,mBAAmB,CAAC,EACpBC,oBAAoB,CAAC,EACrBC,YAAY,IAAI,EAChBC,iBAAiB,EAEjB,mBAAmB;IACnBC,2BAA2B,KAAK,EAEhC,aAAa;IACbC,UAAU,EACVC,SAAS,EAETC,YAAY,KAAK,EACjBC,KAAK,EACLC,SAAS,EACTC,SAAS,EACTC,QAAQ,EACRC,eAAe,EAEH,WADTC;QApBHf;QACAC;QACAC;QACAC;QACAC;QACAC;QAGAC;QAGAC;QACAC;QAEAC;QACAC;QACAC;QACAC;QACAC;QACAC;;IAKF,MAAM,CAACE,UAAUC,YAAY,GAAG9B,SAAgC;IAEhE,MAAM,EAAE+B,eAAe,EAAEC,WAAW,EAAE,GAAGtB,uBAAuB;QAC9DG;QACAC;QACAG;QACAY;QACAI,aAAab,CAAAA,uBAAAA,iCAAAA,WAAYc,MAAM,KAAI3B;QACnC4B,cAAcf,CAAAA,uBAAAA,iCAAAA,WAAYgB,OAAO,KAAI5B;QACrCO;QACAC;QACAE;IACF;IAEA,MAAM,EACJL,WAAWwB,iBAAiB,EAC5BC,IAAI,EACJC,cAAc,EACdC,cAAc,EACf,GAAGpC,YAAY;QACdS,WAAWkB;QACXU,YAAYT;QACZU,sBAAqB,GAAGC,IAAI;YAC1B,OAAOlC,6BAA6BkC,MAAM;gBACxCC,eAAezB;YACjB;QACF;IACF;IAEAhB,kBAAkB;QAChBmC,KAAKO,YAAY,CAAC,aAAarB,YAAYA,UAAUsB,OAAO,GAAGtB;IACjE,GAAG;QAACc,KAAKO,YAAY;QAAErB;KAAU;IAEjC,qBACE,KAACnB;QAAa0C,iBAAiBpB;kBAC7B,cAAA,MAACL,mDACKM;YACJhB,KAAKV,YAAYU,KAAK0B,KAAKU,WAAW;YACtCzB,OAAO,mBAAKA,OAAUiB;YACtBf,WAAWxB,oCAA2BwB;;gBAErCR,2BACC,KAACX,sEACKc;oBACJ6B,QAAQV,eAAeW,KAAK;oBAC5BrC,WAAWwB;oBACXzB,KAAKkB;oBACAT,YAAY;oBAAE8B,MAAM9B;gBAAU,IAAI,CAAC;gBAG3CK;;;;AAIT,GACA"}